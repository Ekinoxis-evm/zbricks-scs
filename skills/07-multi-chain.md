# Skill: Multi-Chain Deployment Strategy

> Deploying and managing contracts across multiple EVM chains.

## Chains Active in ZBrick

| Chain | ID | Type | USDC Address |
|-------|----|------|-------------|
| Base Sepolia | 84532 | Testnet | `0x036CbD53842c5426634e7929541eC2318f3dCF7e` |
| Base Mainnet | 8453 | Production | `0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913` |

## Deployed Addresses

| Contract | Base Sepolia | Base Mainnet |
|----------|-------------|-------------|
| HouseNFT | `0x2452791d09506e21eb2936f5748c5006965fb325` | `0x776b8158269fbd7fd6a91a0514b8850777ac0227` |
| AuctionFactory | `0x9be95601c0b39705170b2424821aaab437be181c` | `0x3347f6a853e04281daa0314f49a76964f010366f` |

## Chain Detection in Scripts

```solidity
function run() external {
    address usdcAddress;

    if (block.chainid == 8453) {
        usdcAddress = 0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913;
    } else if (block.chainid == 84532) {
        usdcAddress = 0x036CbD53842c5426634e7929541eC2318f3dCF7e;
    } else {
        revert("Unsupported chain");
    }
}
```

## Deployment Workflow

```
1. Local Testing     →  anvil + forge test
2. Testnet Deploy    →  Base Sepolia (free gas via faucet)
3. Testnet Verify    →  Blockscout
4. Integration Test  →  Run full flows on Sepolia
5. Mainnet Deploy    →  Base Mainnet (real ETH for gas)
6. Mainnet Verify    →  Blockscout + Basescan
7. Extract Artifacts →  node script/extractDeployment.js all
```

## RPC Configuration

```bash
# .env
BASE_SEPOLIA_RPC_URL=https://sepolia.base.org
BASE_RPC_URL=https://mainnet.base.org
```

Free RPC endpoints work for deployment. For production frontends, use:
- Alchemy: `https://base-sepolia.g.alchemy.com/v2/YOUR_KEY`
- Infura: `https://base-sepolia.infura.io/v3/YOUR_KEY`
- QuickNode, Ankr, etc.

## Potential Chain Expansion

| Chain | ID | USDC | Explorer |
|-------|----|------|----------|
| Arbitrum One | 42161 | `0xaf88d065e77c8cC2239327C5EDb3A432268e5831` | arbiscan.io |
| Optimism | 10 | `0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85` | optimistic.etherscan.io |
| Polygon PoS | 137 | `0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359` | polygonscan.com |
| Ethereum | 1 | `0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48` | etherscan.io |
| Avalanche | 43114 | `0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E` | snowtrace.io |

To add a new chain: update the `if/else` in deploy scripts, add RPC to `foundry.toml`, add USDC address.

## Address Registry

All deployments are tracked in `deployments/addresses.json`:

```json
{
  "8453": {
    "chainId": 8453,
    "chainName": "Base Mainnet",
    "explorer": "https://base.blockscout.com",
    "contracts": {
      "HouseNFT": "0x...",
      "AuctionFactory": "0x..."
    }
  }
}
```

Generated by `node script/extractDeployment.js all`.
